---
ansible-navigator:
  ansible:
    config:
      path: ./ansible.cfg
    playbook:
      path: playbooks/main.yml

  # Execution Environment: True runs in a container (Consistency & Stability)
  execution-environment:
    enabled: true
    image: ghcr.io/ansible/creator-ee:v0.22.0
    pull:
      policy: missing
    volume-mounts:
      - src: "~/.ssh/id_ed25519"
        dest: "/home/runner/.ssh/id_ed25519"
        options: "ro"
      - src: "./ansible.cfg"
        dest: "/home/runner/ansible.cfg"
        options: "ro"
      - src: "."
        dest: "/home/runner/project"

  # Logging: Detailed debug logs
  logging:
    level: debug
    file: ./var/log/ansible-navigator.log
    append: true

  # Artifacts: Replayable JSON logs (The "DVR" feature)
  playbook-artifact:
    enable: true
    save-as: ./var/lib/vps-setup/artifacts/{playbook_name}-{time_stamp}.json

  # UI/UX: Enhanced TUI
  color:
    enable: true
    osc4: true

  # TUI: Analyst Mode optimizations
  inventory-columns:
    - ansible_host
    - os_family
    - ansible_connection

  time-zone: local

  editor:
    command: code
    console: false

  # UI/UX: Stdout for visibility (fixes blank screen)
  #  - mode: stdout (streams logs like ansible-playbook)
  #  - enable-prompts: true (allows password inputs)
  mode: stdout
  enable-prompts: true

  # TUI: Analyst Mode optimizations (still available via --mode interactive)
