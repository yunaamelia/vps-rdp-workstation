# AI DevTools Role
---
- name: Install aider AI coding assistant (Official Installer)
  ansible.builtin.shell: |
    export AIDER_INSTALL_DIR="/usr/local/bin"
    curl -LsSf https://aider.chat/install.sh | sh
  args:
    creates: /usr/local/bin/aider
  become: true
  changed_when: false
  ignore_errors: true
  tags: [tools, ai]

- name: Install shell-gpt via pipx
  ansible.builtin.shell: |
    sudo -u {{ vps_username }} pipx install shell-gpt
  args:
    creates: "/home/{{ vps_username }}/.local/bin/sgpt"
  become: true
  ignore_errors: true
  tags: [tools, ai]

- name: Create AI tools configuration note
  ansible.builtin.copy:
    dest: "/home/{{ vps_username }}/.ai-tools-setup.md"
    content: |
      # AI Development Tools Setup

      ## Aider (AI Pair Programming)
      Configure with: aider --config
      Docs: https://aider.chat

      ## Shell-GPT
      Configure with: sgpt --init
      Set API key: export OPENAI_API_KEY=your_key
      Docs: https://github.com/TheR1D/shell_gpt
    mode: '0644'
    owner: "{{ vps_username }}"
    group: "{{ vps_username }}"
  tags: [tools, ai]

- name: Log ai-devtools role completion
  ansible.builtin.debug:
    msg: "âœ“ AI DevTools role completed"
  tags: [tools, ai]
