# Development Debugging Role
---
- name: Install debugging tools
  ansible.builtin.apt:
    name:
      - gdb
      - valgrind
      - cmake
      - make
      - automake
      - autoconf
      - libtool
      - pkg-config
      - ltrace
      - binutils
      - kcachegrind
      - heaptrack
    state: present
  tags: [tools, debugging]

- name: Check if shfmt is installed
  ansible.builtin.stat:
    path: /usr/local/bin/shfmt
  register: shfmt_stat
  tags: [tools, debugging]

- name: Install shfmt for shell formatting
  ansible.builtin.get_url:
    url: >-
      https://github.com/mvdan/sh/releases/download/v{{ vps_dev_debugging_shfmt_version }}/shfmt_v{{ vps_dev_debugging_shfmt_version }}_linux_amd64
    dest: /usr/local/bin/shfmt
    mode: '0755'
  when: not shfmt_stat.stat.exists
  tags: [tools, debugging]

- name: Log dev-debugging role completion
  ansible.builtin.debug:
    msg: "âœ“ Dev Debugging role completed"
  tags: [tools, debugging]
