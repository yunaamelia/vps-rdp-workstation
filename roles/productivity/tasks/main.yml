# Productivity Role
---
- name: Install thefuck via pipx
  ansible.builtin.shell: |
    sudo -u {{ vps_username }} pipx install thefuck
  args:
    creates: "/home/{{ vps_username }}/.local/bin/thefuck"
  become: true
  tags: [tools, productivity]

- name: Inject setuptools into thefuck (Fix Python 3.12+ distutils)
  ansible.builtin.shell: |
    sudo -u {{ vps_username }} pipx inject thefuck setuptools
  become: true
  changed_when: false
  tags: [tools, productivity]

- name: Install tldr via pipx
  ansible.builtin.shell: |
    sudo -u {{ vps_username }} pipx install tldr
  args:
    creates: "/home/{{ vps_username }}/.local/bin/tldr"
  become: true
  tags: [tools, productivity]

- name: Add thefuck to zshrc
  ansible.builtin.blockinfile:
    path: "/home/{{ vps_username }}/.zshrc"
    marker: "# {mark} ANSIBLE MANAGED BLOCK - THEFUCK"
    block: |
      eval $(thefuck --alias)
    owner: "{{ vps_username }}"
    group: "{{ vps_username }}"
  ignore_errors: true
  tags: [tools, productivity]

- name: Log productivity role completion
  ansible.builtin.debug:
    msg: "âœ“ Productivity role completed"
  tags: [tools, productivity]
